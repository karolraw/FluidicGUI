{"ast":null,"code":"var _jsxFileName = \"E:\\\\flow chemistry\\\\fluidicGUI\\\\frontend\\\\fluidicgui\\\\src\\\\components\\\\Flowchart\\\\SidePanel.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useReactFlow } from 'react-flow-renderer';\nimport defaultProperties from '../../data/defaultProperties.json';\nimport { backgroundVariants } from '../../styles/backgroundStyles';\nimport { useButtonStyles } from '../../styles/ButtonStyleProvider';\nimport { WS_URL } from '../../config';\nimport FlowchartUploader from './FlowchartUploader';\n\n// For WebSocket connection\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WebSocket = window.WebSocket || window.MozWebSocket;\nconst SidePanel = ({\n  onAddNode,\n  onImportFlow,\n  nodes,\n  edges,\n  onProceed,\n  onScanDevices,\n  detectedDevices = []\n}) => {\n  _s();\n  const [nodeName, setNodeName] = useState('');\n  const [nodeType, setNodeType] = useState('pump'); // Default to first type\n  const [nodeTypes, setNodeTypes] = useState([]); // State to store node types\n  const [localWs, setLocalWs] = useState(null);\n  const [localDevices, setLocalDevices] = useState([]);\n  const [exportFilename, setExportFilename] = useState('flow'); // Default filename\n  const [isDevicesExpanded, setIsDevicesExpanded] = useState(true);\n  const [isDataControlExpanded, setIsDataControlExpanded] = useState(true);\n  const [isAddNodeExpanded, setIsAddNodeExpanded] = useState(true);\n  const {\n    toObject\n  } = useReactFlow(); // Access React Flow instance\n\n  // Get dynamic button styles\n  const buttonVariants = useButtonStyles();\n\n  // Use either parent-provided devices or local devices\n  const effectiveDevices = detectedDevices.length > 0 ? detectedDevices : localDevices;\n\n  // Set up a local WebSocket connection\n  useEffect(() => {\n    const websocket = new WebSocket(WS_URL);\n    websocket.onopen = () => {\n      console.log('SidePanel connected to WebSocket server');\n    };\n    websocket.onmessage = event => {\n      try {\n        const data = JSON.parse(event.data);\n\n        // Check if payload is a string that looks like JSON and parse it\n        if (data.payload && typeof data.payload === 'string') {\n          // Check if the string starts and ends with quotes (already serialized string)\n          if (data.payload.startsWith('\"') && data.payload.endsWith('\"')) {\n            // Remove the extra quotes\n            data.payload = data.payload.substring(1, data.payload.length - 1);\n          }\n        }\n\n        // Check if this is a device response message\n        if (data.topic === 'common/device_response') {\n          console.log('Device response received in SidePanel:', data);\n\n          // Parse the payload - format is \"MQTTname:type\"\n          const responseData = data.payload.toString();\n          const [MQTTname, type] = responseData.split(':');\n          if (MQTTname && type) {\n            setLocalDevices(prev => {\n              // Check if device is already in the list\n              const exists = prev.some(device => device.MQTTname === MQTTname);\n              if (!exists) {\n                console.log(`New device detected locally: ${MQTTname} (${type})`);\n\n                // Update the global list for CustomNode to use\n                window.detectedDevices = [...prev, {\n                  MQTTname,\n                  type\n                }];\n                return [...prev, {\n                  MQTTname,\n                  type\n                }];\n              }\n              return prev;\n            });\n          }\n        }\n      } catch (error) {\n        console.error('Error processing WebSocket message in SidePanel:', error);\n      }\n    };\n    websocket.onerror = error => {\n      console.error('SidePanel WebSocket error:', error);\n    };\n    setLocalWs(websocket);\n    return () => {\n      if (websocket) {\n        websocket.close();\n      }\n    };\n  }, []);\n\n  // Load node types from the defaultProperties.json on mount\n  useEffect(() => {\n    const types = Object.keys(defaultProperties).filter(key => key !== 'edges'); // Load node types, ignoring \"edges\"\n    setNodeTypes(types);\n    setNodeType(types[0]); // Set the default node type to the first in the list\n  }, []);\n\n  // Direct scan function\n  const handleLocalScan = () => {\n    console.log('Performing direct scan from SidePanel');\n\n    // Reset local device list\n    setLocalDevices([]);\n\n    // First try the parent's scan function\n    if (onScanDevices) {\n      console.log('Calling parent scan function');\n      onScanDevices();\n    }\n\n    // As a backup, use our local WebSocket connection\n    if (localWs && localWs.readyState === WebSocket.OPEN) {\n      console.log('Sending scan request via local WebSocket');\n      const scanMessage = {\n        topic: \"common/device_scan\",\n        payload: {}\n      };\n      localWs.send(JSON.stringify(scanMessage));\n      console.log('Sent device scan message from SidePanel');\n    } else {\n      console.error('Local WebSocket is not connected');\n    }\n  };\n\n  // Make the scan function available globally for debugging\n  useEffect(() => {\n    window.scanForDevices = handleLocalScan;\n  }, [localWs]);\n  const handleAddNode = () => {\n    var _defaultProperties$no, _defaultProperties$no2;\n    //const nodeProperties = defaultProperties[nodeType].properties || [];  // Load properties based on nodeType\n    const nodeLabel = nodeName || 'Unnamed Node';\n    const newNode = {\n      id: `node-${Date.now()}`,\n      type: 'customNode',\n      // React Flow type\n      position: {\n        x: Math.random() * 500,\n        y: Math.random() * 500\n      },\n      data: {\n        label: nodeLabel,\n        // Set node label\n        type: nodeType,\n        // Set node type, e.g., 'pump'\n        properties: ((_defaultProperties$no = defaultProperties[nodeType]) === null || _defaultProperties$no === void 0 ? void 0 : _defaultProperties$no.properties) || {},\n        // Include node properties\n        parameters: ((_defaultProperties$no2 = defaultProperties[nodeType]) === null || _defaultProperties$no2 === void 0 ? void 0 : _defaultProperties$no2.parameters) || {}\n      }\n    };\n    console.log('New Node with Properties:', newNode); // Log the new node\n    onAddNode(newNode); // Pass the new node to FlowchartEditor\n  };\n\n  // Export flow as JSON\n  const handleExport = () => {\n    const flow = toObject();\n    const json = JSON.stringify(flow, null, 2); // Pretty-print JSON\n    const blob = new Blob([json], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(blob);\n\n    // Use the user-provided filename or default to 'flow'\n    const filename = exportFilename.trim() || 'flow';\n\n    // Ensure filename has .json extension\n    const finalFilename = filename.endsWith('.json') ? filename : `${filename}.json`;\n\n    // Trigger download\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = finalFilename;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Handle flowchart selection from the uploader\n  const handleFlowchartSelect = flowchartData => {\n    if (onImportFlow) {\n      onImportFlow(JSON.stringify(flowchartData));\n    }\n  };\n  const handleAddDeviceNode = device => {\n    var _defaultProperties$ma, _defaultProperties$ma2;\n    // Get available node types from defaultProperties\n    const availableNodeTypes = Object.keys(defaultProperties).filter(key => key !== 'edges');\n\n    // First try to match the exact device type with available node types\n    let matchedNodeType = availableNodeTypes.find(type => type.toLowerCase() === device.type.toLowerCase());\n\n    // If no exact match, check common device categories\n    if (!matchedNodeType) {\n      if (device.type.toLowerCase().includes('pump')) {\n        matchedNodeType = 'pump';\n      } else if (device.type.toLowerCase().includes('detect')) {\n        matchedNodeType = 'detector';\n      } else if (device.type.toLowerCase().includes('therm') || device.type.toLowerCase().includes('temp')) {\n        matchedNodeType = 'thermostat';\n      } else if (device.type.toLowerCase().includes('led') || device.type.toLowerCase().includes('light')) {\n        matchedNodeType = 'led';\n      } else {\n        // Default to the first node type if no match found\n        matchedNodeType = availableNodeTypes[0];\n        console.warn(`No matching node type found for device type: ${device.type}. Using ${matchedNodeType} as fallback.`);\n      }\n    }\n\n    // Create a copy of the properties with the MQTTname value set\n    let properties = [];\n    if ((_defaultProperties$ma = defaultProperties[matchedNodeType]) !== null && _defaultProperties$ma !== void 0 && _defaultProperties$ma.properties) {\n      properties = JSON.parse(JSON.stringify(defaultProperties[matchedNodeType].properties));\n      // Set MQTTname property if it exists\n      for (let prop of properties) {\n        if (prop.name === 'MQTTname') {\n          prop.default = device.MQTTname;\n        }\n      }\n    }\n\n    // Create the new node\n    const newNode = {\n      id: `node-${Date.now()}`,\n      type: 'customNode',\n      position: {\n        x: Math.random() * 500,\n        y: Math.random() * 500\n      },\n      data: {\n        label: device.MQTTname,\n        // Set label to MQTT name\n        type: matchedNodeType,\n        // Set node type\n        MQTTname: device.MQTTname,\n        // Explicitly set MQTT name in data\n        properties: properties,\n        parameters: ((_defaultProperties$ma2 = defaultProperties[matchedNodeType]) === null || _defaultProperties$ma2 === void 0 ? void 0 : _defaultProperties$ma2.parameters) || {}\n      }\n    };\n    console.log('New Device Node:', newNode);\n    onAddNode(newNode);\n  };\n  const styles = {\n    panel: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      width: '250px',\n      height: '100vh',\n      padding: '20px',\n      paddingBottom: '80px',\n      // Extra padding at bottom to ensure all content is visible\n      overflowY: 'auto',\n      // Main scrollbar for entire panel\n      zIndex: 10,\n      backgroundColor: '#222',\n      color: '#eee',\n      boxShadow: '2px 0 10px rgba(0, 0, 0, 0.5)',\n      border: '1px solid #444'\n    },\n    section: {\n      marginBottom: '20px'\n    },\n    input: {\n      display: 'block',\n      margin: '10px 0',\n      padding: '5px',\n      width: '100%',\n      backgroundColor: '#333',\n      color: '#fff',\n      border: '1px solid #555'\n    },\n    collapsibleSection: {\n      marginTop: '20px',\n      marginBottom: '20px'\n    },\n    sectionHeader: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      cursor: 'pointer',\n      padding: '8px',\n      backgroundColor: '#333',\n      borderRadius: '4px 4px 0 0',\n      userSelect: 'none'\n    },\n    sectionContent: isExpanded => ({\n      maxHeight: isExpanded ? 'none' : '0',\n      overflow: isExpanded ? 'visible' : 'hidden',\n      backgroundColor: '#333',\n      borderRadius: '0 0 4px 4px',\n      display: isExpanded ? 'block' : 'none' // Use display property instead of max-height for animation\n    }),\n    contentPadding: {\n      padding: '10px'\n    },\n    deviceSection: {\n      marginTop: '20px',\n      marginBottom: '20px'\n    },\n    deviceHeader: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      cursor: 'pointer',\n      padding: '8px',\n      backgroundColor: '#333',\n      borderRadius: '4px 4px 0 0',\n      userSelect: 'none'\n    },\n    deviceContent: {\n      maxHeight: isDevicesExpanded ? '300px' : '0',\n      overflow: 'hidden',\n      transition: 'max-height 0.3s ease-in-out',\n      backgroundColor: '#333',\n      borderRadius: '0 0 4px 4px'\n    },\n    deviceList: {\n      marginTop: '10px',\n      marginBottom: '10px',\n      backgroundColor: '#333',\n      padding: '10px',\n      borderRadius: '4px'\n    },\n    deviceItem: {\n      padding: '8px',\n      marginBottom: '8px',\n      borderBottom: '1px solid #444',\n      borderRadius: '4px',\n      backgroundColor: '#2a2a2a',\n      transition: 'background-color 0.2s ease',\n      '&:hover': {\n        backgroundColor: '#333'\n      }\n    },\n    chevron: isExpanded => ({\n      transform: isExpanded ? 'rotate(180deg)' : 'rotate(0deg)',\n      transition: 'transform 0.3s ease',\n      fontSize: '12px'\n    }),\n    buttonRow: {\n      display: 'flex',\n      gap: '10px',\n      marginTop: '10px'\n    },\n    exportSection: {\n      display: 'flex',\n      flexDirection: 'column',\n      gap: '10px',\n      marginBottom: '15px'\n    },\n    flowchartItem: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      padding: '5px 0',\n      borderBottom: '1px solid #444'\n    },\n    buttonGroup: {\n      display: 'flex',\n      gap: '5px'\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.panel,\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Flowchart Editor\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.collapsibleSection,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.sectionHeader,\n        onClick: () => setIsAddNodeExpanded(!isAddNodeExpanded),\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            margin: 0\n          },\n          children: \"Add New Element\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.chevron(isAddNodeExpanded),\n          children: \"\\u25BC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.sectionContent(isAddNodeExpanded),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.contentPadding,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Node Name\",\n            value: nodeName,\n            onChange: e => setNodeName(e.target.value),\n            style: styles.input\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: nodeType,\n            onChange: e => setNodeType(e.target.value),\n            style: styles.input,\n            children: nodeTypes.map(type => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: type,\n              children: defaultProperties[type].label\n            }, type, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAddNode,\n            style: {\n              ...buttonVariants.primaryButton,\n              width: '100%',\n              marginTop: '10px'\n            },\n            children: \"Add Node\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.collapsibleSection,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.sectionHeader,\n        onClick: () => setIsDevicesExpanded(!isDevicesExpanded),\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            margin: 0\n          },\n          children: \"Detected Devices\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.chevron(isDevicesExpanded),\n          children: \"\\u25BC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.sectionContent(isDevicesExpanded),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.contentPadding,\n          children: [effectiveDevices.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.deviceList,\n            children: effectiveDevices.map((device, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.deviceItem,\n                ':hover': {\n                  backgroundColor: '#333'\n                }\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '6px'\n                  },\n                  children: [device.type.toLowerCase().includes('pump') ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"16\",\n                    height: \"16\",\n                    viewBox: \"0 0 24 24\",\n                    fill: \"none\",\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M19 8H5V10H7V20H17V10H19V8M9 10H15V18H9V10Z\",\n                      fill: \"#8c8\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 411,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 410,\n                    columnNumber: 27\n                  }, this) : device.type.toLowerCase().includes('detect') ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"16\",\n                    height: \"16\",\n                    viewBox: \"0 0 24 24\",\n                    fill: \"none\",\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z\",\n                      fill: \"#8cf\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 415,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 414,\n                    columnNumber: 27\n                  }, this) : device.type.toLowerCase().includes('therm') || device.type.toLowerCase().includes('temp') ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"16\",\n                    height: \"16\",\n                    viewBox: \"0 0 24 24\",\n                    fill: \"none\",\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M15 13V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V13C7.79 14.07 7 15.71 7 17.5C7 20.54 9.46 23 12.5 23C15.54 23 18 20.54 18 17.5C18 15.71 17.21 14.07 16 13M12 7C11.45 7 11 6.55 11 6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6C13 6.55 12.55 7 12 7Z\",\n                      fill: \"#f88\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 419,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 418,\n                    columnNumber: 27\n                  }, this) : device.type.toLowerCase().includes('led') || device.type.toLowerCase().includes('light') ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"16\",\n                    height: \"16\",\n                    viewBox: \"0 0 24 24\",\n                    fill: \"none\",\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M12 6C15.31 6 18 8.69 18 12C18 14.97 15.84 17.44 13 17.92V22H11V17.92C8.16 17.44 6 14.97 6 12C6 8.69 8.69 6 12 6M12 4C7.58 4 4 7.58 4 12C4 15.3 6.1 18.1 9 19.24V24H15V19.24C17.9 18.1 20 15.3 20 12C20 7.58 16.42 4 12 4Z\",\n                      fill: \"#ff8\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 423,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 422,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"16\",\n                    height: \"16\",\n                    viewBox: \"0 0 24 24\",\n                    fill: \"none\",\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M12 2C17.5 2 22 6.5 22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2ZM12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20C16.42 20 20 16.42 20 12C20 7.58 16.42 4 12 4ZM12 6C15.31 6 18 8.69 18 12C18 15.31 15.31 18 12 18C8.69 18 6 15.31 6 12C6 8.69 8.69 6 12 6ZM12 8C9.79 8 8 9.79 8 12C8 14.21 9.79 16 12 16C14.21 16 16 14.21 16 12C16 9.79 14.21 8 12 8Z\",\n                      fill: \"#aaa\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 427,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 426,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontWeight: 'bold',\n                        color: '#fff'\n                      },\n                      children: device.MQTTname\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 431,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontSize: '11px',\n                        color: '#aaa'\n                      },\n                      children: device.type\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 432,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleAddDeviceNode(device),\n                  style: {\n                    ...buttonVariants.smallSecondary,\n                    fontSize: '11px',\n                    margin: '0',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '3px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"To Node\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 438,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"14\",\n                    height: \"14\",\n                    viewBox: \"0 0 24 24\",\n                    fill: \"none\",\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z\",\n                      fill: \"currentColor\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 440,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 21\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#888',\n              padding: '10px',\n              textAlign: 'center',\n              fontStyle: 'italic'\n            },\n            children: \"No devices detected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLocalScan,\n            style: {\n              ...buttonVariants.secondaryButton,\n              width: '100%',\n              marginTop: '10px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              gap: '8px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"16\",\n              height: \"16\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M12 2C17.5 2 22 6.5 22 12C22 12.38 21.97 12.75 21.92 13.13C21.97 13.42 22 13.71 22 14C22 17.31 19.31 20 16 20V18.92C16.61 18.55 17.16 18.05 17.6 17.5C19.17 16.33 20 14.21 20 12C20 7.58 16.42 4 12 4C7.58 4 4 7.58 4 12C4 14.21 4.83 16.33 6.4 17.5C6.84 18.05 7.39 18.55 8 18.92V20C4.69 20 2 17.31 2 14C2 13.71 2.03 13.42 2.08 13.13C2.03 12.75 2 12.38 2 12C2 6.5 6.5 2 12 2M7 10C7 8.9 7.9 8 9 8C10.1 8 11 8.9 11 10C11 11.1 10.11 12 9 12C7.89 12 7 11.1 7 10M16 8C17.1 8 18 8.9 18 10C18 11.1 17.11 12 16 12C14.89 12 14 11.1 14 10C14 8.9 14.9 8 16 8M12 14C13.75 14 15.29 14.72 16.19 15.81L14.77 17.23C14.32 16.5 13.25 16 12 16C10.75 16 9.68 16.5 9.23 17.23L7.81 15.81C8.71 14.72 10.25 14 12 14Z\",\n                fill: \"currentColor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 15\n            }, this), \"Scan Devices\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.collapsibleSection,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.sectionHeader,\n        onClick: () => setIsDataControlExpanded(!isDataControlExpanded),\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            margin: 0\n          },\n          children: \"Data Control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.chevron(isDataControlExpanded),\n          children: \"\\u25BC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.sectionContent(isDataControlExpanded),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.contentPadding,\n          children: [/*#__PURE__*/_jsxDEV(FlowchartUploader, {\n            onFlowchartSelect: handleFlowchartSelect\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              marginTop: '15px'\n            },\n            children: \"Export Flow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.exportSection,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Export Filename\",\n              value: exportFilename,\n              onChange: e => setExportFilename(e.target.value),\n              style: styles.input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleExport,\n              style: {\n                ...buttonVariants.secondaryButton,\n                width: '100%',\n                marginTop: '10px'\n              },\n              children: \"Export Flow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onProceed,\n      style: {\n        ...buttonVariants.primaryButton,\n        width: '100%',\n        marginTop: '15px'\n      },\n      children: \"Next\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 356,\n    columnNumber: 5\n  }, this);\n};\n_s(SidePanel, \"SBhNh2aHTvpcTOyMBr/R91+9AIA=\", false, function () {\n  return [useReactFlow, useButtonStyles];\n});\n_c = SidePanel;\nexport default SidePanel;\nvar _c;\n$RefreshReg$(_c, \"SidePanel\");","map":{"version":3,"names":["React","useState","useEffect","useReactFlow","defaultProperties","backgroundVariants","useButtonStyles","WS_URL","FlowchartUploader","jsxDEV","_jsxDEV","WebSocket","window","MozWebSocket","SidePanel","onAddNode","onImportFlow","nodes","edges","onProceed","onScanDevices","detectedDevices","_s","nodeName","setNodeName","nodeType","setNodeType","nodeTypes","setNodeTypes","localWs","setLocalWs","localDevices","setLocalDevices","exportFilename","setExportFilename","isDevicesExpanded","setIsDevicesExpanded","isDataControlExpanded","setIsDataControlExpanded","isAddNodeExpanded","setIsAddNodeExpanded","toObject","buttonVariants","effectiveDevices","length","websocket","onopen","console","log","onmessage","event","data","JSON","parse","payload","startsWith","endsWith","substring","topic","responseData","toString","MQTTname","type","split","prev","exists","some","device","error","onerror","close","types","Object","keys","filter","key","handleLocalScan","readyState","OPEN","scanMessage","send","stringify","scanForDevices","handleAddNode","_defaultProperties$no","_defaultProperties$no2","nodeLabel","newNode","id","Date","now","position","x","Math","random","y","label","properties","parameters","handleExport","flow","json","blob","Blob","url","URL","createObjectURL","filename","trim","finalFilename","link","document","createElement","href","download","body","appendChild","click","removeChild","handleFlowchartSelect","flowchartData","handleAddDeviceNode","_defaultProperties$ma","_defaultProperties$ma2","availableNodeTypes","matchedNodeType","find","toLowerCase","includes","warn","prop","name","default","styles","panel","top","left","width","height","padding","paddingBottom","overflowY","zIndex","backgroundColor","color","boxShadow","border","section","marginBottom","input","display","margin","collapsibleSection","marginTop","sectionHeader","alignItems","justifyContent","cursor","borderRadius","userSelect","sectionContent","isExpanded","maxHeight","overflow","contentPadding","deviceSection","deviceHeader","deviceContent","transition","deviceList","deviceItem","borderBottom","chevron","transform","fontSize","buttonRow","gap","exportSection","flexDirection","flowchartItem","buttonGroup","style","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","placeholder","value","onChange","e","target","map","primaryButton","index","viewBox","fill","xmlns","d","fontWeight","smallSecondary","textAlign","fontStyle","secondaryButton","onFlowchartSelect","_c","$RefreshReg$"],"sources":["E:/flow chemistry/fluidicGUI/frontend/fluidicgui/src/components/Flowchart/SidePanel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useReactFlow } from 'react-flow-renderer';\r\nimport defaultProperties from '../../data/defaultProperties.json';\r\nimport { backgroundVariants } from '../../styles/backgroundStyles';\r\nimport { useButtonStyles } from '../../styles/ButtonStyleProvider';\r\nimport { WS_URL } from '../../config';\r\nimport FlowchartUploader from './FlowchartUploader';\r\n\r\n// For WebSocket connection\r\nconst WebSocket = window.WebSocket || window.MozWebSocket;\r\n\r\nconst SidePanel = ({ onAddNode, onImportFlow, nodes, edges, onProceed, onScanDevices, detectedDevices = [] }) => {\r\n  const [nodeName, setNodeName] = useState('');\r\n  const [nodeType, setNodeType] = useState('pump');  // Default to first type\r\n  const [nodeTypes, setNodeTypes] = useState([]);    // State to store node types\r\n  const [localWs, setLocalWs] = useState(null);\r\n  const [localDevices, setLocalDevices] = useState([]);\r\n  const [exportFilename, setExportFilename] = useState('flow');  // Default filename\r\n  const [isDevicesExpanded, setIsDevicesExpanded] = useState(true);\r\n  const [isDataControlExpanded, setIsDataControlExpanded] = useState(true);\r\n  const [isAddNodeExpanded, setIsAddNodeExpanded] = useState(true);\r\n  const { toObject } = useReactFlow();  // Access React Flow instance\r\n  \r\n  // Get dynamic button styles\r\n  const buttonVariants = useButtonStyles();\r\n\r\n  // Use either parent-provided devices or local devices\r\n  const effectiveDevices = detectedDevices.length > 0 ? detectedDevices : localDevices;\r\n\r\n  // Set up a local WebSocket connection\r\n  useEffect(() => {\r\n    const websocket = new WebSocket(WS_URL);\r\n    \r\n    websocket.onopen = () => {\r\n      console.log('SidePanel connected to WebSocket server');\r\n    };\r\n\r\n    websocket.onmessage = (event) => {\r\n      try {\r\n        const data = JSON.parse(event.data);\r\n        \r\n        // Check if payload is a string that looks like JSON and parse it\r\n        if (data.payload && typeof data.payload === 'string') {\r\n          // Check if the string starts and ends with quotes (already serialized string)\r\n          if (data.payload.startsWith('\"') && data.payload.endsWith('\"')) {\r\n            // Remove the extra quotes\r\n            data.payload = data.payload.substring(1, data.payload.length - 1);\r\n          }\r\n        }\r\n        \r\n        // Check if this is a device response message\r\n        if (data.topic === 'common/device_response') {\r\n          console.log('Device response received in SidePanel:', data);\r\n          \r\n          // Parse the payload - format is \"MQTTname:type\"\r\n          const responseData = data.payload.toString();\r\n          const [MQTTname, type] = responseData.split(':');\r\n          \r\n          if (MQTTname && type) {\r\n            setLocalDevices(prev => {\r\n              // Check if device is already in the list\r\n              const exists = prev.some(device => device.MQTTname === MQTTname);\r\n              if (!exists) {\r\n                console.log(`New device detected locally: ${MQTTname} (${type})`);\r\n                \r\n                // Update the global list for CustomNode to use\r\n                window.detectedDevices = [...prev, { MQTTname, type }];\r\n                \r\n                return [...prev, { MQTTname, type }];\r\n              }\r\n              return prev;\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error processing WebSocket message in SidePanel:', error);\r\n      }\r\n    };\r\n\r\n    websocket.onerror = (error) => {\r\n      console.error('SidePanel WebSocket error:', error);\r\n    };\r\n\r\n    setLocalWs(websocket);\r\n\r\n    return () => {\r\n      if (websocket) {\r\n        websocket.close();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Load node types from the defaultProperties.json on mount\r\n  useEffect(() => {\r\n    const types = Object.keys(defaultProperties).filter(key => key !== 'edges'); // Load node types, ignoring \"edges\"\r\n    setNodeTypes(types);\r\n    setNodeType(types[0]);  // Set the default node type to the first in the list\r\n  }, []);\r\n\r\n  // Direct scan function\r\n  const handleLocalScan = () => {\r\n    console.log('Performing direct scan from SidePanel');\r\n    \r\n    // Reset local device list\r\n    setLocalDevices([]);\r\n    \r\n    // First try the parent's scan function\r\n    if (onScanDevices) {\r\n      console.log('Calling parent scan function');\r\n      onScanDevices();\r\n    }\r\n    \r\n    // As a backup, use our local WebSocket connection\r\n    if (localWs && localWs.readyState === WebSocket.OPEN) {\r\n      console.log('Sending scan request via local WebSocket');\r\n      const scanMessage = {\r\n        topic: \"common/device_scan\",\r\n        payload: {}\r\n      };\r\n      \r\n      localWs.send(JSON.stringify(scanMessage));\r\n      console.log('Sent device scan message from SidePanel');\r\n    } else {\r\n      console.error('Local WebSocket is not connected');\r\n    }\r\n  };\r\n\r\n  // Make the scan function available globally for debugging\r\n  useEffect(() => {\r\n    window.scanForDevices = handleLocalScan;\r\n  }, [localWs]);\r\n\r\n  const handleAddNode = () => {\r\n    //const nodeProperties = defaultProperties[nodeType].properties || [];  // Load properties based on nodeType\r\n    const nodeLabel = nodeName || 'Unnamed Node';\r\n    const newNode = {\r\n      id: `node-${Date.now()}`,\r\n      type: 'customNode',  // React Flow type\r\n      position: { x: Math.random() * 500, y: Math.random() * 500 },\r\n      data: {\r\n        label: nodeLabel, // Set node label\r\n        type: nodeType,  // Set node type, e.g., 'pump'\r\n        properties: defaultProperties[nodeType]?.properties || {},  // Include node properties\r\n        parameters: defaultProperties[nodeType]?.parameters || {},\r\n      },\r\n    };\r\n  \r\n    console.log('New Node with Properties:', newNode);  // Log the new node\r\n    onAddNode(newNode);  // Pass the new node to FlowchartEditor\r\n  };\r\n\r\n  // Export flow as JSON\r\n  const handleExport = () => {\r\n    const flow = toObject();\r\n    const json = JSON.stringify(flow, null, 2);  // Pretty-print JSON\r\n    const blob = new Blob([json], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n\r\n    // Use the user-provided filename or default to 'flow'\r\n    const filename = exportFilename.trim() || 'flow';\r\n    \r\n    // Ensure filename has .json extension\r\n    const finalFilename = filename.endsWith('.json') ? filename : `${filename}.json`;\r\n\r\n    // Trigger download\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = finalFilename;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  // Handle flowchart selection from the uploader\r\n  const handleFlowchartSelect = (flowchartData) => {\r\n    if (onImportFlow) {\r\n      onImportFlow(JSON.stringify(flowchartData));\r\n    }\r\n  };\r\n\r\n  const handleAddDeviceNode = (device) => {\r\n    // Get available node types from defaultProperties\r\n    const availableNodeTypes = Object.keys(defaultProperties).filter(key => key !== 'edges');\r\n    \r\n    // First try to match the exact device type with available node types\r\n    let matchedNodeType = availableNodeTypes.find(type => type.toLowerCase() === device.type.toLowerCase());\r\n    \r\n    // If no exact match, check common device categories\r\n    if (!matchedNodeType) {\r\n      if (device.type.toLowerCase().includes('pump')) {\r\n        matchedNodeType = 'pump';\r\n      } else if (device.type.toLowerCase().includes('detect')) {\r\n        matchedNodeType = 'detector';\r\n      } else if (device.type.toLowerCase().includes('therm') || device.type.toLowerCase().includes('temp')) {\r\n        matchedNodeType = 'thermostat';\r\n      } else if (device.type.toLowerCase().includes('led') || device.type.toLowerCase().includes('light')) {\r\n        matchedNodeType = 'led';\r\n      } else {\r\n        // Default to the first node type if no match found\r\n        matchedNodeType = availableNodeTypes[0];\r\n        console.warn(`No matching node type found for device type: ${device.type}. Using ${matchedNodeType} as fallback.`);\r\n      }\r\n    }\r\n\r\n    // Create a copy of the properties with the MQTTname value set\r\n    let properties = [];\r\n    if (defaultProperties[matchedNodeType]?.properties) {\r\n      properties = JSON.parse(JSON.stringify(defaultProperties[matchedNodeType].properties));\r\n      // Set MQTTname property if it exists\r\n      for (let prop of properties) {\r\n        if (prop.name === 'MQTTname') {\r\n          prop.default = device.MQTTname;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Create the new node\r\n    const newNode = {\r\n      id: `node-${Date.now()}`,\r\n      type: 'customNode',\r\n      position: { x: Math.random() * 500, y: Math.random() * 500 },\r\n      data: {\r\n        label: device.MQTTname, // Set label to MQTT name\r\n        type: matchedNodeType, // Set node type\r\n        MQTTname: device.MQTTname, // Explicitly set MQTT name in data\r\n        properties: properties,\r\n        parameters: defaultProperties[matchedNodeType]?.parameters || {},\r\n      },\r\n    };\r\n\r\n    console.log('New Device Node:', newNode);\r\n    onAddNode(newNode);\r\n  };\r\n\r\n  const styles = {\r\n    panel: {\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      width: '250px',\r\n      height: '100vh',\r\n      padding: '20px',\r\n      paddingBottom: '80px', // Extra padding at bottom to ensure all content is visible\r\n      overflowY: 'auto',     // Main scrollbar for entire panel\r\n      zIndex: 10,\r\n      backgroundColor: '#222',\r\n      color: '#eee',\r\n      boxShadow: '2px 0 10px rgba(0, 0, 0, 0.5)',\r\n      border: '1px solid #444'\r\n    },\r\n    section: {\r\n      marginBottom: '20px',\r\n    },\r\n    input: {\r\n      display: 'block',\r\n      margin: '10px 0',\r\n      padding: '5px',\r\n      width: '100%',\r\n      backgroundColor: '#333',\r\n      color: '#fff',\r\n      border: '1px solid #555'\r\n    },\r\n    collapsibleSection: {\r\n      marginTop: '20px',\r\n      marginBottom: '20px',\r\n    },\r\n    sectionHeader: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'space-between',\r\n      cursor: 'pointer',\r\n      padding: '8px',\r\n      backgroundColor: '#333',\r\n      borderRadius: '4px 4px 0 0',\r\n      userSelect: 'none',\r\n    },\r\n    sectionContent: isExpanded => ({\r\n      maxHeight: isExpanded ? 'none' : '0',\r\n      overflow: isExpanded ? 'visible' : 'hidden',\r\n      backgroundColor: '#333',\r\n      borderRadius: '0 0 4px 4px',\r\n      display: isExpanded ? 'block' : 'none', // Use display property instead of max-height for animation\r\n    }),\r\n    contentPadding: {\r\n      padding: '10px',\r\n    },\r\n    deviceSection: {\r\n      marginTop: '20px',\r\n      marginBottom: '20px',\r\n    },\r\n    deviceHeader: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'space-between',\r\n      cursor: 'pointer',\r\n      padding: '8px',\r\n      backgroundColor: '#333',\r\n      borderRadius: '4px 4px 0 0',\r\n      userSelect: 'none',\r\n    },\r\n    deviceContent: {\r\n      maxHeight: isDevicesExpanded ? '300px' : '0',\r\n      overflow: 'hidden',\r\n      transition: 'max-height 0.3s ease-in-out',\r\n      backgroundColor: '#333',\r\n      borderRadius: '0 0 4px 4px',\r\n    },\r\n    deviceList: {\r\n      marginTop: '10px',\r\n      marginBottom: '10px',\r\n      backgroundColor: '#333',\r\n      padding: '10px',\r\n      borderRadius: '4px'\r\n    },\r\n    deviceItem: {\r\n      padding: '8px',\r\n      marginBottom: '8px',\r\n      borderBottom: '1px solid #444',\r\n      borderRadius: '4px',\r\n      backgroundColor: '#2a2a2a',\r\n      transition: 'background-color 0.2s ease',\r\n      '&:hover': {\r\n        backgroundColor: '#333'\r\n      }\r\n    },\r\n    chevron: isExpanded => ({\r\n      transform: isExpanded ? 'rotate(180deg)' : 'rotate(0deg)',\r\n      transition: 'transform 0.3s ease',\r\n      fontSize: '12px',\r\n    }),\r\n    buttonRow: {\r\n      display: 'flex',\r\n      gap: '10px',\r\n      marginTop: '10px'\r\n    },\r\n    exportSection: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      gap: '10px',\r\n      marginBottom: '15px'\r\n    },\r\n    flowchartItem: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      padding: '5px 0',\r\n      borderBottom: '1px solid #444'\r\n    },\r\n    buttonGroup: {\r\n      display: 'flex',\r\n      gap: '5px'\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.panel}>\r\n      <h3>Flowchart Editor</h3>\r\n      \r\n      <div style={styles.collapsibleSection}>\r\n        <div \r\n          style={styles.sectionHeader}\r\n          onClick={() => setIsAddNodeExpanded(!isAddNodeExpanded)}\r\n        >\r\n          <h4 style={{ margin: 0 }}>Add New Element</h4>\r\n          <span style={styles.chevron(isAddNodeExpanded)}>▼</span>\r\n        </div>\r\n        <div style={styles.sectionContent(isAddNodeExpanded)}>\r\n          <div style={styles.contentPadding}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Node Name\"\r\n              value={nodeName}\r\n              onChange={(e) => setNodeName(e.target.value)}\r\n              style={styles.input}\r\n            />\r\n            <select value={nodeType} onChange={(e) => setNodeType(e.target.value)} style={styles.input}>\r\n              {nodeTypes.map((type) => (\r\n                <option key={type} value={type}>\r\n                  {defaultProperties[type].label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <button onClick={handleAddNode} style={{...buttonVariants.primaryButton, width: '100%', marginTop: '10px'}}>\r\n              Add Node\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={styles.collapsibleSection}>\r\n        <div \r\n          style={styles.sectionHeader}\r\n          onClick={() => setIsDevicesExpanded(!isDevicesExpanded)}\r\n        >\r\n          <h4 style={{ margin: 0 }}>Detected Devices</h4>\r\n          <span style={styles.chevron(isDevicesExpanded)}>▼</span>\r\n        </div>\r\n        <div style={styles.sectionContent(isDevicesExpanded)}>\r\n          <div style={styles.contentPadding}>\r\n            {effectiveDevices.length > 0 ? (\r\n              <div style={styles.deviceList}>\r\n                {effectiveDevices.map((device, index) => (\r\n                  <div key={index} style={{\r\n                    ...styles.deviceItem,\r\n                    ':hover': { backgroundColor: '#333' }\r\n                  }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                      <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\r\n                        {device.type.toLowerCase().includes('pump') ? (\r\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M19 8H5V10H7V20H17V10H19V8M9 10H15V18H9V10Z\" fill=\"#8c8\"/>\r\n                          </svg>\r\n                        ) : device.type.toLowerCase().includes('detect') ? (\r\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z\" fill=\"#8cf\"/>\r\n                          </svg>\r\n                        ) : device.type.toLowerCase().includes('therm') || device.type.toLowerCase().includes('temp') ? (\r\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M15 13V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V13C7.79 14.07 7 15.71 7 17.5C7 20.54 9.46 23 12.5 23C15.54 23 18 20.54 18 17.5C18 15.71 17.21 14.07 16 13M12 7C11.45 7 11 6.55 11 6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6C13 6.55 12.55 7 12 7Z\" fill=\"#f88\"/>\r\n                          </svg>\r\n                        ) : device.type.toLowerCase().includes('led') || device.type.toLowerCase().includes('light') ? (\r\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M12 6C15.31 6 18 8.69 18 12C18 14.97 15.84 17.44 13 17.92V22H11V17.92C8.16 17.44 6 14.97 6 12C6 8.69 8.69 6 12 6M12 4C7.58 4 4 7.58 4 12C4 15.3 6.1 18.1 9 19.24V24H15V19.24C17.9 18.1 20 15.3 20 12C20 7.58 16.42 4 12 4Z\" fill=\"#ff8\"/>\r\n                          </svg>\r\n                        ) : (\r\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M12 2C17.5 2 22 6.5 22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2ZM12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20C16.42 20 20 16.42 20 12C20 7.58 16.42 4 12 4ZM12 6C15.31 6 18 8.69 18 12C18 15.31 15.31 18 12 18C8.69 18 6 15.31 6 12C6 8.69 8.69 6 12 6ZM12 8C9.79 8 8 9.79 8 12C8 14.21 9.79 16 12 16C14.21 16 16 14.21 16 12C16 9.79 14.21 8 12 8Z\" fill=\"#aaa\"/>\r\n                          </svg>\r\n                        )}\r\n                        <div>\r\n                          <div style={{ fontWeight: 'bold', color: '#fff' }}>{device.MQTTname}</div>\r\n                          <div style={{ fontSize: '11px', color: '#aaa' }}>{device.type}</div>\r\n                        </div>\r\n                      </div>\r\n                      <button \r\n                        onClick={() => handleAddDeviceNode(device)} \r\n                        style={{...buttonVariants.smallSecondary, fontSize: '11px', margin: '0', display: 'flex', alignItems: 'center', gap: '3px'}}>\r\n                        <span>To Node</span>\r\n                        <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                          <path d=\"M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z\" fill=\"currentColor\"/>\r\n                        </svg>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div style={{ color: '#888', padding: '10px', textAlign: 'center', fontStyle: 'italic' }}>\r\n                No devices detected\r\n              </div>\r\n            )}\r\n            <button \r\n              onClick={handleLocalScan} \r\n              style={{...buttonVariants.secondaryButton, width: '100%', marginTop: '10px', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '8px'}}>\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M12 2C17.5 2 22 6.5 22 12C22 12.38 21.97 12.75 21.92 13.13C21.97 13.42 22 13.71 22 14C22 17.31 19.31 20 16 20V18.92C16.61 18.55 17.16 18.05 17.6 17.5C19.17 16.33 20 14.21 20 12C20 7.58 16.42 4 12 4C7.58 4 4 7.58 4 12C4 14.21 4.83 16.33 6.4 17.5C6.84 18.05 7.39 18.55 8 18.92V20C4.69 20 2 17.31 2 14C2 13.71 2.03 13.42 2.08 13.13C2.03 12.75 2 12.38 2 12C2 6.5 6.5 2 12 2M7 10C7 8.9 7.9 8 9 8C10.1 8 11 8.9 11 10C11 11.1 10.11 12 9 12C7.89 12 7 11.1 7 10M16 8C17.1 8 18 8.9 18 10C18 11.1 17.11 12 16 12C14.89 12 14 11.1 14 10C14 8.9 14.9 8 16 8M12 14C13.75 14 15.29 14.72 16.19 15.81L14.77 17.23C14.32 16.5 13.25 16 12 16C10.75 16 9.68 16.5 9.23 17.23L7.81 15.81C8.71 14.72 10.25 14 12 14Z\" fill=\"currentColor\"/>\r\n              </svg>\r\n              Scan Devices\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={styles.collapsibleSection}>\r\n        <div \r\n          style={styles.sectionHeader}\r\n          onClick={() => setIsDataControlExpanded(!isDataControlExpanded)}\r\n        >\r\n          <h4 style={{ margin: 0 }}>Data Control</h4>\r\n          <span style={styles.chevron(isDataControlExpanded)}>▼</span>\r\n        </div>\r\n        <div style={styles.sectionContent(isDataControlExpanded)}>\r\n          <div style={styles.contentPadding}>\r\n            <FlowchartUploader onFlowchartSelect={handleFlowchartSelect} />\r\n            \r\n            <h4 style={{ marginTop: '15px' }}>Export Flow</h4>\r\n            <div style={styles.exportSection}>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Export Filename\"\r\n                value={exportFilename}\r\n                onChange={(e) => setExportFilename(e.target.value)}\r\n                style={styles.input}\r\n              />\r\n              <button \r\n                onClick={handleExport} \r\n                style={{...buttonVariants.secondaryButton, width: '100%', marginTop: '10px'}}>\r\n                Export Flow\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <button \r\n        onClick={onProceed} \r\n        style={{...buttonVariants.primaryButton, width: '100%', marginTop: '15px'}}>\r\n        Next\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SidePanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}